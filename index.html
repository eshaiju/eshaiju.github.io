
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>TechSleek</title>
  <meta name="author" content="Shaiju E">

  
  <meta name="description" content="Best in place is a j Query based Ajax plug in that can help us to add in place editing to our application that takes profit of Restful server-side &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://eshaiju.github.io">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="TechSleek" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-50480030-1']);
    _gaq.push(['_setDomainName','github.io']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">TechSleek</a></h1>
  
    <h2>Its a place to write about I learned recently.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:eshaiju.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/04/30/in-page-editing-in-rails-active-admin-using-gem-best-in-place/">In Page Editing in &#8216;Active Admin&#8217; - Using Gem &#8216;Best in Place&#8217;</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-04-30T18:20:30+05:30" pubdate data-updated="true">Apr 30<span>th</span>, 2014</time>
        
           | <a href="/blog/2014/04/30/in-page-editing-in-rails-active-admin-using-gem-best-in-place/#disqus_thread"
             data-disqus-identifier="http://eshaiju.github.io/blog/2014/04/30/in-page-editing-in-rails-active-admin-using-gem-best-in-place/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<div dir="ltr" style="text-align: left;" trbidi="on">
<span style="font-weight: bold;">Best in place </span>is a j Query based Ajax plug in that can help us to add in place editing to our application that takes profit of Restful server-side controllers to allow users to edit stuff with no need of forms. Usage of this gem in rails application is well documented in <a href="https://github.com/bernat/best_in_place">github page</a>. You can checkout their live demo <a href="http://bipapp.heroku.com">here</a>. In this post I concentrating on how we can use best in place gem with is active admin pages.
<br/>
To add Best in Place to our app we first need to add its gem to our application&#8217;s Gemfile and run bundle.

<figure class='code'><figcaption><span>Gemfile</span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>gem 'best_in_place', github: 'bernat/best_in_place'</span></code></pre></td></tr></table></div></figure>

Require best in place in active_admin.js.coffee and initialise it

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>#= require best_in_place
</span><span class='line'>#= require best_in_place.purr
</span><span class='line'>
</span><span class='line'>$(document).ready ->
</span><span class='line'>  jQuery(".best_in_place").best_in_place()</span></code></pre></td></tr></table></div></figure>


To make text field editable in active admin show page 

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>row :name do |project|
</span><span class='line'> best_in_place project, :name, :type => :input,:path =>[:admin,project]
</span><span class='line'>end</span></code></pre></td></tr></table></div></figure>

To make select field editable

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>row :status do |project|
</span><span class='line'>  best_in_place project, :status, :type => :select,:path =>[:admin,project],:collection => Project.statuses.map{|status| [status,status]}
</span><span class='line'>end</span></code></pre></td></tr></table></div></figure>

Textarea can be make editable using following code

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>row :status_description  do |project|
</span><span class='line'>  best_in_place project, :status_description, :type => :textarea,:path =>[:admin,project]
</span><span class='line'>end</span></code></pre></td></tr></table></div></figure>

For Editable Datepicker with formated output use <span style="font-weight: bold;">display_with</span>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>row "Planned Start Date" do |project|
</span><span class='line'>  best_in_place project, :planned_start_date , :type => :date ,:path =>[:admin,project],  :display_with => lambda { |v| v.try(:strftime,'%b %d, %Y') }
</span><span class='line'>end</span></code></pre></td></tr></table></div></figure>

</div>
</div>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/03/16/nested-forms-for-belongsto-relationship/">Nested Forms for Belongs_to Relationship - ActiveAdmin</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-03-16T12:27:00+05:30" pubdate data-updated="true">Mar 16<span>th</span>, 2014</time>
        
           | <a href="/blog/2014/03/16/nested-forms-for-belongsto-relationship/#disqus_thread"
             data-disqus-identifier="http://eshaiju.github.io/blog/2014/03/16/nested-forms-for-belongsto-relationship/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<div dir="ltr" style="text-align: left;" trbidi="on">
For my current project I had to add nested form for belongs_to relationship. After lots of searching i found a solution.
<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>class Product&lt;ActiveRecord::Base
</span><span class='line'> belongs_to :cost, :class_name => 'Currency', foreign_key: 'cost_id'
</span><span class='line'> accepts_nested_attributes_for :cost
</span><span class='line'> attr_accessor :cost_id
</span><span class='line'>end</span></code></pre></td></tr></table></div></figure>
<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>class Currency &lt; ActiveRecord::Base
</span><span class='line'> def self.currency_types
</span><span class='line'>   ['SAR','AED','USD','EUR','INR']
</span><span class='line'> end
</span><span class='line'>end</span></code></pre></td></tr></table></div></figure>
<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>ActiveAdmin.registerProductdo
</span><span class='line'> form do |f|
</span><span class='line'>    f.semantic_errors *f.object.errors.keys
</span><span class='line'>    f.inputs "Details" do
</span><span class='line'>      f.input :name
</span><span class='line'>      f.inputs "cost" do
</span><span class='line'>         f.semantic_fields_for :cost_attributes  do |j|
</span><span class='line'>            j.inputs do
</span><span class='line'>              j.input :currency_type, :as => :select, :collection => Currency.currency_types,:label =>'Cost'
</span><span class='line'>              j.input :value
</span><span class='line'>            end
</span><span class='line'>          end
</span><span class='line'>        end
</span><span class='line'>      end
</span><span class='line'>    end
</span><span class='line'>    f.actions
</span><span class='line'> end
</span><span class='line'>
</span><span class='line'> controller do
</span><span class='line'>   def permitted_params
</span><span class='line'>    params.permit product: [:name,cost_attributes:[:id,:currency_type,:value]]
</span><span class='line'>   end
</span><span class='line'> end
</span><span class='line'>end</span></code></pre></td></tr></table></div></figure>
</div></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/03/05/fullcalendar-integration-with-ruby-on/">FullCalendar - Integration With Ruby on Rails</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-03-05T13:02:00+05:30" pubdate data-updated="true">Mar 5<span>th</span>, 2014</time>
        
           | <a href="/blog/2014/03/05/fullcalendar-integration-with-ruby-on/#disqus_thread"
             data-disqus-identifier="http://eshaiju.github.io/blog/2014/03/05/fullcalendar-integration-with-ruby-on/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<div dir="ltr" style="text-align: left;" trbidi="on">

  FullCalendar is a jQuery plugin that provides a full-sized drag drop calendar like the one below. It uses AJAX to fetch events on-the-fly for each month and is easily configured to use your own feed format (an extension is provided for Google Calendar. It is visually customizable and exposes hooks for user-triggered events (like clicking or dragging an event). It is open source licensed under an MIT license
  <br/>
<img border="0" src="http://1.bp.blogspot.com/-qa_L3JuaqW4/UvxSTF0KUgI/AAAAAAAAAUw/7kbq7plSXAU/s1600/calender.png" height="426" width="640" />
<br/>
Step 1 : Download the JQuery fullcalendar plugin by <a href="http://arshaw.com/fullcalendar/download/">here</a> and add fullcalender.js and fullcalender.css in to javascripts and stylesheets folder.Fullcalendar is also available as a gem for Ruby on Rails which fits well with Asset Pipeline.
<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>gem 'fullcalendar-rails'</span></code></pre></td></tr></table></div></figure>
Once the gem is installed, include fullcalendar javascript and css assets to your js and css file
<br/>
Step 2 : In view page index.html.erb or some other html.erb page add a div with id &#8216;calendar&#8217;
<br/>
Then add following code to js file
<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$(document).ready(function() {
</span><span class='line'>   $("#calendar").fullCalendar({
</span><span class='line'>     header: 
</span><span class='line'>     left: "prev,next today",
</span><span class='line'>     center: "title",
</span><span class='line'>     right: "month,agendaWeek,agendaDay"
</span><span class='line'>     defaultView: "month",
</span><span class='line'>     height: 500,
</span><span class='line'>     slotMinutes: 15,
</span><span class='line'>     events: "/dashboard/get_events",
</span><span class='line'>     timeFormat: "h:mm t{ - h:mm t} ",
</span><span class='line'>     dragOpacity: "0.5"
</span><span class='line'>  });
</span><span class='line'>});</span></code></pre></td></tr></table></div></figure>
Now we need to write a method to fetch Json data which we are going to display on calender
<br/>
In my example 

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>class DashboardController &lt; ApplicationController
</span><span class='line'>  respond_to :json
</span><span class='line'>  def get_events
</span><span class='line'>    @task = current_user.tasks
</span><span class='line'>    events = []
</span><span class='line'>    @task.each do |task|
</span><span class='line'>      events &lt;&lt; {:id => task.id, :title => "#{task.taskable.try(:name)} : #{task.task}", :start => "#{task.planned_start_date}",:end => "#{task.planned_end_date}" }
</span><span class='line'>    end
</span><span class='line'>    render :text => events.to_json
</span><span class='line'>  end
</span><span class='line'>end</span></code></pre></td></tr></table></div></figure>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>DemoApp::Application.routes.draw do
</span><span class='line'>  resources :dashboard do
</span><span class='line'>    get :get_events, on: :collection
</span><span class='line'>  end
</span><span class='line'>end</span></code></pre></td></tr></table></div></figure>

that&#8217;s it , now you can see calender in your dashboard
<br/>

</div></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/02/04/activeadmin-adding-filter-on-hasone/">ActiveAdmin- Adding a Filter on Has_one Through Association</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-02-04T12:34:00+05:30" pubdate data-updated="true">Feb 4<span>th</span>, 2014</time>
        
           | <a href="/blog/2014/02/04/activeadmin-adding-filter-on-hasone/#disqus_thread"
             data-disqus-identifier="http://eshaiju.github.io/blog/2014/02/04/activeadmin-adding-filter-on-hasone/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
  <div dir="ltr" style="text-align: left;" trbidi="on">




Given Project, Task,  and Activity, I&#8217;ve managed to set up has_one :through relationship filter with the following:
<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>class Project &lt; ActiveRecord::Base
</span><span class='line'>  has_many :tasks
</span><span class='line'>end</span></code></pre></td></tr></table></div></figure>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>class Task &lt; ActiveRecord::Base
</span><span class='line'>  belongs_to :project
</span><span class='line'>  has_many :activities, :dependent => :destroy
</span><span class='line'>end</span></code></pre></td></tr></table></div></figure>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>class Activity &lt; ActiveRecord::Base
</span><span class='line'>  has_many :tasks
</span><span class='line'>  has_one  :project, through: :task
</span><span class='line'>end</span></code></pre></td></tr></table></div></figure>
<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>ActiveAdmin.register User do
</span><span class='line'>  filter :task_project_id, as: :select, collection: Project.all, label: 'Project'
</span><span class='line'>end</span></code></pre></td></tr></table></div></figure>

  </div>
</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/01/01/autocomplete-using-chosen-in-rails/">Autocomplete Using Chosen in Rails Active_admin</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-01-01T16:29:00+05:30" pubdate data-updated="true">Jan 1<span>st</span>, 2014</time>
        
           | <a href="/blog/2014/01/01/autocomplete-using-chosen-in-rails/#disqus_thread"
             data-disqus-identifier="http://eshaiju.github.io/blog/2014/01/01/autocomplete-using-chosen-in-rails/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<div dir="ltr" style="text-align: left;" trbidi="on">

In one of my recent project, i need to implement a autocomplte in active_admin interface to select one or more users from user list. I tried googling on this and zeroed in on the library Chosen.Chosen by default supports multiple select, selected state.Chosen is available as a gem for Ruby on Rails which fits well with Asset Pipeline.
<br/>Include Chosen gem in your Gemfile.
<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>gem ‘chosen-rails’</span></code></pre></td></tr></table></div></figure>
Once the gem is installed, include chosen javascript assets to your js file. 
<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>//= require chosen-jquery</span></code></pre></td></tr></table></div></figure>
In /app/admin/modelname.rb
<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>ActiveAdmin.register Modlename do
</span><span class='line'>  #Customize create and edit form
</span><span class='line'>  form do |f|
</span><span class='line'>    f.inputs do
</span><span class='line'>       f.input :name
</span><span class='line'>       f.input :othermodel, :input_html => { :class => "chosen-input" } # other model with has_many relation ship
</span><span class='line'>    end
</span><span class='line'>    f.buttons
</span><span class='line'>  end   
</span><span class='line'>end</span></code></pre></td></tr></table></div></figure>
in active_admin.js
<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$(document).ready(function(){
</span><span class='line'>   $(".chosen-input").chosen();
</span><span class='line'>});</span></code></pre></td></tr></table></div></figure>
if you are using coffee script instead of js then use this 
<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ ->
</span><span class='line'>  # enable chosen js
</span><span class='line'>  $('.chosen-input').chosen
</span><span class='line'>    allow_single_deselect: true
</span><span class='line'>    no_results_text: 'No results matched'</span></code></pre></td></tr></table></div></figure>
Then, include Chosen stylesheet assets to your css file.
<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>*= require chosen</span></code></pre></td></tr></table></div></figure>
To include more details check <a href='http://harvesthq.github.io/chosen/'>Here </a>
<br/>
Thats it, you will have a nice autocomplte with multiselect . Happy coding…
<br/><br/>
</div></div>
<h2>Comments</h2>
<div class='comments'>
<div class='comment'>
<div class='author'>Lobna Mohamed</div>
<div class='content'>
Thanks for the good post, but does not save data to the database<br />I guess it related to permit_params I am trying this <br />permit_params :name, :othermodel_ids<br />but still not working, have you another idea??</div>


</div>
</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/11/03/changing-kannel-log-level-log-rotation/">Changing Kannel Log Level & Log Rotation</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-11-03T12:40:00+05:30" pubdate data-updated="true">Nov 3<span>rd</span>, 2013</time>
        
           | <a href="/blog/2013/11/03/changing-kannel-log-level-log-rotation/#disqus_thread"
             data-disqus-identifier="http://eshaiju.github.io/blog/2013/11/03/changing-kannel-log-level-log-rotation/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<div dir="ltr" style="text-align: left;" trbidi="on">
  If Kannel is configured so that the bearerbox, wapbox and/or smsbox log to file each of these log files will continue to grow unless administered in some way. &nbsp;One way of reducing logs is by change log level.&nbsp;kannel allow to have 5 log-level ( 0 - debug, 1 - info, 2 - warning, 3 - error, 4 - panic).&nbsp;We can change log level by editing log-level component in configuration file and also done by admin HTTP command without restaring bearerbox.
  <figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>http://localhost:13000/log-level?password=bar&amp;level=2</span></code></pre></td></tr></table></div></figure>
  Another way of administering log files is to &#8216;rotate&#8217; the logs on a regular basis using a tool such as logrotate. A sample logrotate script is shown below.<br />
  Setup Logrotate<br /><br />
  Step 1 : If logrotate is not already on your VPS, install it now.<br />
  <figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo apt-get install logrotate</span></code></pre></td></tr></table></div></figure>
  Step 2 : Add following script in file  <span style="font-weight: bold;">/etc/logrotate.d</span>
  <figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>/var/log/kannel/*.log {daily
</span><span class='line'>                         missingok
</span><span class='line'>                         rotate 365
</span><span class='line'>                         compress
</span><span class='line'>                         delaycompress
</span><span class='line'>                         notifempty
</span><span class='line'>                         create 640 kannel adm
</span><span class='line'>                         sharedscripts
</span><span class='line'>                         postrotate
</span><span class='line'>                         killall -HUP bearerbox smsbox wapbox || true &gt; /dev/null 2&gt; /dev/null
</span><span class='line'>                         endscript
</span><span class='line'>                        }</span></code></pre></td></tr></table></div></figure>
In this example the Kannel log files found in <span style="font-weight: bold;">/var/log/kannel</span> are rotated and compressed daily over 365 days.&nbsp;To verify if a particular log is rotating or not and to check the last date and time of its rotation, check the <span style="font-weight: bold;"> /var/lib/logrotate/status </span>file.
<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>cat /var/lib/logrotate/status</span></code></pre></td></tr></table></div></figure>
</div></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/10/31/installing-and-configuring-sql-based/">Installing and Configuring SQL-Based Queue Engine for Kannel (Sqlbox)</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-10-31T00:57:00+05:30" pubdate data-updated="true">Oct 31<span>st</span>, 2013</time>
        
           | <a href="/blog/2013/10/31/installing-and-configuring-sql-based/#disqus_thread"
             data-disqus-identifier="http://eshaiju.github.io/blog/2013/10/31/installing-and-configuring-sql-based/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<div dir="ltr" style="text-align: left;" trbidi="on">
  Sqlbox is a special Kannel box that sits between bearerbox and smsbox and uses a database queue to store and forward messages.Messages are queued on a configurable table (defaults to send_sms) and moved to another table (defaults to sent_sms) afterwards.
  <br />
  After installing gateway, we need to compile Sqlbox.
  <br />
  Steps:<br /><br />&nbsp;
  1 - cd into directory where Kannel is unzipped and then type the following commands<br />
  <figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>cd addons/sqlbox/
</span><span class='line'>sudo ./bootstrap
</span><span class='line'>sudo ./configure --with-kannel-dir=/usr/local/kannel-1.5.0/
</span><span class='line'>sudo make bindir=/usr/local/kannel/kannel-1.5.0/</span></code></pre></td></tr></table></div></figure>
  2 -Create a file named smsbox.conf and following configuration
<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>#SQL BOX CONFIG
</span><span class='line'>
</span><span class='line'>group = sqlbox
</span><span class='line'>id = sqlbox-db
</span><span class='line'>smsbox-id = sqlbox
</span><span class='line'>global-sender = ""
</span><span class='line'>bearerbox-host = localhost
</span><span class='line'>bearerbox-port = 13010
</span><span class='line'>smsbox-port = 13020
</span><span class='line'>smsbox-port-ssl = false
</span><span class='line'>sql-log-table = sent_sms
</span><span class='line'>sql-insert-table = send_sms
</span><span class='line'>log-file = "/var/log/kannel/kannel-sqlbox.log"
</span><span class='line'>
</span><span class='line'># Database connection examples. Please uncomment as needed
</span><span class='line'># Example MYSQL Connection
</span><span class='line'>
</span><span class='line'>group = mysql-connection
</span><span class='line'>id = sqlbox-db
</span><span class='line'>host = localhost
</span><span class='line'>username = username
</span><span class='line'>password = password
</span><span class='line'>database = kannel_db</span></code></pre></td></tr></table></div></figure>

3 - create &nbsp;send_sms table using following sql command
<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>CREATE TABLE `send_sms` (
</span><span class='line'>                          `sql_id` bigint(20) NOT NULL auto_increment,
</span><span class='line'>                          `momt` enum('MO','MT') default NULL,
</span><span class='line'>                          `sender` varchar(20) default NULL,
</span><span class='line'>                          `receiver` varchar(20) default NULL,
</span><span class='line'>                          `udhdata` blob,&lt;br />&nbsp; `msgdata` text,
</span><span class='line'>                          `time` bigint(20) default NULL,
</span><span class='line'>                          `smsc_id` varchar(255) default NULL,
</span><span class='line'>                          `service` varchar(255) default NULL,
</span><span class='line'>                          `account` varchar(255) default NULL,
</span><span class='line'>                          `id` bigint(20) default NULL,
</span><span class='line'>                          `sms_type` bigint(20) default NULL,
</span><span class='line'>                          `mclass` bigint(20) default NULL,
</span><span class='line'>                          `mwi` bigint(20) default NULL,
</span><span class='line'>                          `coding` bigint(20) default NULL,
</span><span class='line'>                          `compress` bigint(20) default NULL,
</span><span class='line'>                          `validity` bigint(20) default NULL,
</span><span class='line'>                          `deferred` bigint(20) default NULL,
</span><span class='line'>                          `dlr_mask` bigint(20) default NULL,
</span><span class='line'>                          `dlr_url` varchar(255) default NULL,
</span><span class='line'>                          `pid` bigint(20) default NULL,
</span><span class='line'>                          `alt_dcs` bigint(20) default NULL,
</span><span class='line'>                          `rpi` bigint(20) default NULL,
</span><span class='line'>                          `charset` varchar(255) default NULL,
</span><span class='line'>                          `boxc_id` varchar(255) default NULL,
</span><span class='line'>                          `meta_data` varchar(255) default NULL,
</span><span class='line'>                          `foreign_id` bigint(20) default NULL,
</span><span class='line'>                          `binfo` varchar(255) default NULL,
</span><span class='line'>                          PRIMARY KEY (`sql_id`)) ENGINE=MyISAM DEFAULT CHARSET=latin1;</span></code></pre></td></tr></table></div></figure>

4 - Create &nbsp;sent_sms table using same structure with changing table name <br />
Now start bearerbox and sqlbox using commands
<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo /usr/local/kannel-1.5.0/sbin bearerbox /home/shaiju/kannel/kannel.conf
</span><span class='line'>sudo /usr/local/kannel-1.5.0/sbin sqlbox /home/shaiju/kannel/sqlbox.conf</span></code></pre></td></tr></table></div></figure>
Example<br />
As when you&#8217;re using the sendsms interface, you don&#8217;t need to specify all the columns in order to succesfully enqueue a message.<br />
Here&#8217;s an example query you can use to send a simple message using Sqlbox:
<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>INSERT INTO send_sms ( &nbsp;momt, sender, receiver, msgdata, sms_type, smsc_id) VALUES ( &nbsp;'MT', 'TESTID', '9995323922', 'Hello world', 2,'testsmsc1');</span></code></pre></td></tr></table></div></figure>
The former example would send a message with text &#8220;Hello world&#8221; to number &#8220;9995323922&#8221;. If possible, the sender would be set to &#8220;TESTID&#8221;.You can add other parameters to specify routing, charset encoding and any other settings your setup may require<br />
If you are keen to learn more about this , Refer <a href="http://www.blogalex.com/wp-content/uploads/2008/11/userguide.html">Here</a><br />
</div></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/10/03/kannel-monitoring-tool-ruby-gem/">Kannel Monitoring Tool - Ruby Gem</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-10-03T23:47:00+05:30" pubdate data-updated="true">Oct 3<span>rd</span>, 2013</time>
        
           | <a href="/blog/2013/10/03/kannel-monitoring-tool-ruby-gem/#disqus_thread"
             data-disqus-identifier="http://eshaiju.github.io/blog/2013/10/03/kannel-monitoring-tool-ruby-gem/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<div dir="ltr" style="text-align: left;" trbidi="on">
  <div>Last few months I have been facing lots of issues in kannel SMS gateway.Some time sms are getting queued up, in some other time smsc went to reconnecting stage. I searched for a tool which will monitor kannel status Unfortunately i didn&#8217;t find a tool to monitor and give alert. so decided to write a tool which will monitor kannel activities.</div>
  <figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>kannel_monitor 0.0.2</span></code></pre></td></tr></table></div></figure>
  This gem will monitor<br />
  <ul>
    <li>&nbsp; &nbsp;kannel status</li>
    <li>&nbsp; &nbsp;kannel sms queue</li>
    <li>&nbsp; &nbsp;smsc status</li>
    <li>&nbsp; &nbsp;smsc queue and will send a email alerts when something went wrong.</li>
  </ul>
  Just install gem in server using 
    <figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>gem install kannel_monitor</span></code></pre></td></tr></table></div></figure>
  run monitoring activity using command 
  <figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>kannel_monitor 'path to kannel_monitor.yml'</span></code></pre></td></tr></table></div></figure>
   Example of <b>yml</b> file is given&nbsp;<b><a href="https://github.com/shaijunonu/kannel-monitor/blob/master/config/kannel_monitor.yml" style="color: #1155cc;">Here</a>.
   </b><br /><span>you need to set a crone job to run this in a specific intervals. If a smsc is permanently reconection stage and you don&#8217;t want to monitor that smsc, then you can skip that particular smsc by adding in <b>sms_to_be_skipped&nbsp;</b></span>
</div></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/10/01/a-gem-for-generating-custom-error-pages/">A Gem for Generating Custom Error Pages in Rails Application</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-10-01T09:30:00+05:30" pubdate data-updated="true">Oct 1<span>st</span>, 2013</time>
        
           | <a href="/blog/2013/10/01/a-gem-for-generating-custom-error-pages/#disqus_thread"
             data-disqus-identifier="http://eshaiju.github.io/blog/2013/10/01/a-gem-for-generating-custom-error-pages/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<div dir="ltr" style="text-align: left;" trbidi="on"><div class="separator" style="clear: both;"><span style="color: #222222;">Writing a Ruby Gem was my long time wish, but i couldn&#8217;t find an idea to make a gem. Finally got it, for which i didn&#8217;t find a gem, a generator which will automatically generate a custom code for handling 404 and 500 errors and pages in rails application (Thanks to Sreekanth for noting there is no &nbsp;gem for this taks). Here it is&nbsp;</span></div>
<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>rails_error_pages 1.0.5</span></code></pre></td></tr></table></div></figure>
How to use :
<br/>
Simply add it to your Gemfile and bundle install.
<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>gem 'rails_error_pages'</span></code></pre></td></tr></table></div></figure>
Next step is to use a generator, to add auto generated code into our application using
<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>rails g rails_error_pages</span></code></pre></td></tr></table></div></figure>
That&#8217;s it! run your application and try with a false URL. <br/></div></div></div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/09/09/configuring-mysql-dlr-storage/">Configuring MySQL DLR Storage</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-09-09T18:45:00+05:30" pubdate data-updated="true">Sep 9<span>th</span>, 2013</time>
        
           | <a href="/blog/2013/09/09/configuring-mysql-dlr-storage/#disqus_thread"
             data-disqus-identifier="http://eshaiju.github.io/blog/2013/09/09/configuring-mysql-dlr-storage/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<div dir="ltr" style="text-align: left;" trbidi="on">To support mysql, we have to recompile kannel with &#8211;mysql 
<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>./configure --prefix=/usr/local/kannel --with-mysql</span></code></pre></td></tr></table></div></figure>
To store DLR information into a MySQL database you may use the dlr-storage = mysql configuration directive in the core group.In addition to that you must have a dlr-db group defined that specifies the table field names that are used to the DLR attributes and a mysql-connection group that defines the connection to the MySQL server itself.
<br/>
Here is the example configuration
<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>group = core
</span><span class='line'>.........
</span><span class='line'>dlr-storage = mysql
</span><span class='line'>group = mysql-connection
</span><span class='line'>id = mydlr
</span><span class='line'>host = localhost
</span><span class='line'>username = foo
</span><span class='line'>password = bar
</span><span class='line'>database = dlr
</span><span class='line'>max-connections = 1
</span><span class='line'>group = dlr-db
</span><span class='line'>id = mydlr
</span><span class='line'>table = dlr
</span><span class='line'>field-smsc = smsc
</span><span class='line'>field-timestamp = ts
</span><span class='line'>field-destination = destination
</span><span class='line'>field-source = source
</span><span class='line'>field-service = service
</span><span class='line'>field-url = url
</span><span class='line'>field-mask = mask
</span><span class='line'>field-status = status
</span><span class='line'>field-boxc-id = boxc</span></code></pre></td></tr></table></div></figure>
Create table dlr<br /><br />
<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>CREATE TABLE dlr (smsc varchar(40),
</span><span class='line'>                  ts varchar(40),
</span><span class='line'>                  destination varchar(40),
</span><span class='line'>                  source varchar(40),
</span><span class='line'>                  service varchar(40),
</span><span class='line'>                  url varchar(255),
</span><span class='line'>                  mask int(10),
</span><span class='line'>                  status int(10),
</span><span class='line'>                  boxc varchar(40))</span></code></pre></td></tr></table></div></figure>
</div>
</div></div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/2/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2014/04/30/in-page-editing-in-rails-active-admin-using-gem-best-in-place/">In Page Editing in &#8216;Active Admin&#8217; - Using Gem &#8216;Best in Place&#8217;</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/03/16/nested-forms-for-belongsto-relationship/">Nested Forms for Belongs_to Relationship - ActiveAdmin</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/03/05/fullcalendar-integration-with-ruby-on/">FullCalendar - Integration With Ruby on Rails</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/02/04/activeadmin-adding-filter-on-hasone/">ActiveAdmin- Adding a Filter on Has_one Through Association</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/01/01/autocomplete-using-chosen-in-rails/">Autocomplete Using Chosen in Rails Active_admin</a>
      </li>
    
  </ul>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - Shaiju E -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'eshaijugithubio';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
